<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SubTrack - Add Subscription</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
body {
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('images/background.jpg') no-repeat center center fixed;
    background-size: cover;
    min-height: 100vh;
    font-family: 'Segoe UI', sans-serif;
    color: #fff;
    margin: 0;
}

/* Navbar styling */
.navbar {
    background: rgba(0,0,0,0.6);
    padding: 0 20px;
    height: 50px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

.navbar-brand {
    font-weight: 700;
    font-size: 1.6rem;
    line-height: 50px;
    color: #fff !important;
}

.nav-link {
    color: #ddd !important;
    margin-right: 15px;
    font-size: 1rem;
    line-height: 50px;
    transition: color 0.3s;
}
.nav-link:hover { color: #ffcc00 !important; }

.container {
    padding: 60px 30px;
}

/* Card Styling */
#planGrid .card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    border-radius: 15px;
    color: #fff;
    padding: 20px;
    margin-bottom: 20px;
    transition: all 0.3s ease;
}
#planGrid .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}
.card-title { font-weight: 700; font-size: 1.3rem; }
.card-text { font-size: 0.95rem; margin-bottom: 10px; }
.btn-buy {
    background: linear-gradient(90deg, #ff6a00, #ee0979);
    border: none;
    color: #fff;
    font-weight: 600;
}
.btn-buy:hover { transform: translateY(-2px); }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="MySubscriptions.html">SubTrack</a>
    <div class="collapse navbar-collapse justify-content-end">
      <ul class="navbar-nav">
         <li class="nav-item"><a class="nav-link" href="./DashBoard.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="./Plans1.html">Plans</a></li>
            <li class="nav-item"><a class="nav-link" href="./Contact1.html">Contact</a></li>
            <li class="nav-item"><a class="nav-link" href="./About1.html">About</a></li>
        <li class="nav-item"><a class="nav-link" href="MySubscription.html">My Subscriptions</a></li>
        <li class="nav-item"><a class="nav-link" href="logout.html">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
    <h2 class="mb-4">Select a Plan</h2>
    <div id="planGrid" class="row g-4"></div>
</div>

<script>
// Fetch all plans from backend
async function loadPlans() {
    try {
        const res = await fetch('http://localhost:3000/api/plans'); // your backend API
        if(!res.ok) throw new Error('Failed to fetch plans');
        const plans = await res.json();
        const container = document.getElementById('planGrid');
        container.innerHTML = '';

        plans.forEach(plan => {
            const col = document.createElement('div');
            col.className = 'col-md-4';
            col.innerHTML = `
                <div class="card h-100">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">${plan.name}</h5>
                        <p class="card-text"><strong>Price:</strong> â‚¹${plan.price}</p>
                        <p class="card-text"><strong>Start:</strong> ${plan.startDate.split('T')[0]}</p>
                        <p class="card-text"><strong>Expiry:</strong> ${plan.expiryDate.split('T')[0]}</p>
                        <p class="card-text">${plan.description || ''}</p>
                        <button class="btn btn-buy mt-auto" onclick="buyPlan(${plan.Id})">Buy Now</button>
                    </div>
                </div>
            `;
            container.appendChild(col);
        });
    } catch(err) {
        console.error(err);
        alert('Error loading plans');
    }
}

// Redirect when Buy Now clicked
function buyPlan(planId) {
    // Redirect to purchase or payment page
    window.location.href = `purchase.html?planId=${planId}`;
}

// Load plans on page load
loadPlans();
</script>

</body>
</html>
